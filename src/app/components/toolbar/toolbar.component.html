<div class="toolbar">
  <div class="toolbar-row">
    <button (click)="addLine()" 
            class="btn btn-primary"
            [class.active]="drawingService.drawingMode === 'addLine'">Add Line</button>
    <button (click)="startPiping()" 
            class="btn btn-secondary"
            [class.active]="drawingService.drawingMode === 'addPipe'">Add Pipe</button>
    <button (click)="addText()" 
            class="btn btn-info"
            [class.active]="drawingService.drawingMode === 'text'">Add Text</button>
    <button (click)="setDimensionMode()" 
            class="btn btn-warning"
            [class.active]="drawingService.drawingMode === 'dimension'">Dimension</button>
    <button (click)="toggleSnapToAngle()" 
            class="btn"
            [class.btn-success]="snapToAngle"
            [class.btn-outline-secondary]="!snapToAngle">
      30Â° Snap {{ snapToAngle ? 'ON' : 'OFF' }}
    </button>
    <button (click)="groupSelectedObjects()" class="btn btn-dark">Group</button>
    <button (click)="ungroupObjects()" class="btn btn-dark">Ungroup</button>
    <button (click)="addAnchors()" 
            class="btn btn-light"
            [class.active]="drawingService.drawingMode === 'addAnchors'">Anchors</button>
    <button (click)="applyDimension()" class="btn btn-light">Apply Dim</button>
  </div>
  
  <div class="toolbar-row">
    <button (click)="toggleWelding()" 
            class="btn btn-danger"
            [class.active]="showWeldingTools">Welding</button>
    
    <div class="welding-tools" *ngIf="showWeldingTools">
      <button (click)="startWeldstamp()" 
              class="btn btn-outline-danger"
              [class.active]="drawingService.drawingMode === 'weldstamp'">Weldstamp</button>
      <button (click)="startWelderStamp()" 
              class="btn btn-outline-danger"
              [class.active]="drawingService.drawingMode === 'welderstamp'">Welder Stamp</button>
      <button (click)="startWelderStampEmpty()" 
              class="btn btn-outline-danger"
              [class.active]="drawingService.drawingMode === 'welderstampempty'">Welder Stamp empty</button>
      <button (click)="startWelderStampAS()" 
              class="btn btn-outline-danger"
              [class.active]="drawingService.drawingMode === 'welderstampas'">Welder Stamp AS</button>
      <button (click)="startWeld()" 
              class="btn btn-outline-danger"
              [class.active]="drawingService.drawingMode === 'weld'">Weld</button>
      <button (click)="startFluidStamp()" 
              class="btn btn-outline-danger"
              [class.active]="drawingService.drawingMode === 'fluidstamp'">Flange Stamp</button>
      <button (click)="startSpool()" 
              class="btn btn-outline-danger"
              [class.active]="drawingService.drawingMode === 'spool'">Spool</button>
    </div>
    
    <button (click)="togglePiping()" 
            class="btn btn-info"
            [class.active]="showPipingTools">Piping</button>
    
    <div class="piping-tools" *ngIf="showPipingTools">
      <button (click)="startFlow()" 
              class="btn btn-outline-info"
              [class.active]="drawingService.drawingMode === 'flow'">Flow</button>
      
      <button (click)="toggleValves()" 
              class="btn btn-outline-info"
              [class.active]="showValveTools">Valves</button>
      
      <div class="valve-tools" *ngIf="showValveTools" style="margin-left: 10px; display: inline-block;">
        <button (click)="toggleGateValve()" 
                class="btn btn-sm btn-outline-info"
                [class.active]="showGateValveTools">Gate</button>
        <button (click)="toggleGlobeValve()" 
                class="btn btn-sm btn-outline-info"
                [class.active]="showGlobeValveTools">Globe</button>
        <button (click)="toggleBallValve()" 
                class="btn btn-sm btn-outline-info"
                [class.active]="showBallValveTools">Ball</button>
        <button class="btn btn-sm btn-outline-info" disabled>Check</button>
        
        <div class="gate-valve-tools" *ngIf="showGateValveTools" style="margin-left: 5px; display: inline-block;">
          <button (click)="startGateValveS()" 
                  class="btn btn-sm btn-outline-secondary"
                  [class.active]="drawingService.drawingMode === 'gateValveS'">S</button>
          <button (click)="startGateValveFL()" 
                  class="btn btn-sm btn-outline-secondary"
                  [class.active]="drawingService.drawingMode === 'gateValveFL'">FL</button>
        </div>
        
        <div class="globe-valve-tools" *ngIf="showGlobeValveTools" style="margin-left: 5px; display: inline-block;">
          <button (click)="startGlobeValveS()" 
                  class="btn btn-sm btn-outline-secondary"
                  [class.active]="drawingService.drawingMode === 'globeValveS'">S</button>
          <button (click)="startGlobeValveFL()" 
                  class="btn btn-sm btn-outline-secondary"
                  [class.active]="drawingService.drawingMode === 'globeValveFL'">FL</button>
        </div>
        
        <div class="ball-valve-tools" *ngIf="showBallValveTools" style="margin-left: 5px; display: inline-block;">
          <button (click)="startBallValveS()" 
                  class="btn btn-sm btn-outline-secondary"
                  [class.active]="drawingService.drawingMode === 'ballValveS'">S</button>
          <button (click)="startBallValveFL()" 
                  class="btn btn-sm btn-outline-secondary"
                  [class.active]="drawingService.drawingMode === 'ballValveFL'">FL</button>
        </div>
      </div>
    </div>
  </div>
</div>